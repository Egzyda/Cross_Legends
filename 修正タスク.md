
### 1. ターゲット選択と行動決定のリアルタイム化
* 敵の行動決定（generateEnemyCommands）をターン開始時ではなく、各ユニットの「行動順が回ってきた直後」に実行するよう変更する。
* 味方が先制して放った「挑発（taunt）」の状態を、その後の敵の行動決定時に `selectTarget` で即座に反映できるようにする。
* ターゲットが行動直前に戦闘不能になった場合、別の生存している味方へリターゲットするロジックを保証する。

### 2. 動的な行動順計算（スピード変化の即時反映）
* ターンの最初に全コマンドをソートして固定する現在の方式を廃止し、1人行動が終わるたびに「未行動ユニットの中で最も速度が高い者」を再計算して次の行動者を選ぶ方式へ移行する。
* 敵の「先制技（priority: 'first'）」が、敵の行動決定ロジック変更後も正しくソート順の最上位にくるよう修正する。

### 3. 敵AIの知能化と連発抑制（ターゲット属性判定）
* 技の `target` が `all_enemies`（全体技）である場合、使用後にフラグを立て、次ターンの発動率を大幅（10%）に減衰させるクールタイム制を導入する。
* 自分のHPが30%以下の「瀕死状態」では、攻撃バフやデバフなどの補助技を選択肢から除外し、攻撃または回復のみを選択するように制限する。
* スキル選択時の重複チェックにおいて、デバフなら「プレイヤー側」、バフなら「自分たち（敵側）」のステータスを参照するように判定コンテキストを分離する。
* バフ（補助技）の対象選択時、常にリストの先頭を選ぶのではなく、生存している仲間からランダムに選ぶように改善する。

### 4. クリティカル計算の合算処理とUI表示の適正化
* `calculateDamage` 内のクリティカル判定において、`.find()` による単一参照を止め、`.filter()` と `.reduce()` ですべての `critBoost` バフ値を合算するロジックへ変更する。
* 内部計算では100%を超える数値（例：150%）を許容し、敵の耐性減算にも対応できる余地を残す。
* ステータス詳細画面（showCharacterDetail）の表示のみ、`Math.min(100, finalCrit)` を適用してプレイヤーには「最大100%」と表示されるようにUIロジックを修正する。
