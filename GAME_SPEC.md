# Cross Legends（クロス・レジェンズ）完全仕様書

**最終更新: 2026-01-29**

---

## 📖 目次

1. [ゲーム概要](#ゲーム概要)
2. [ゲームシステム](#ゲームシステム)
3. [キャラクターシステム](#キャラクターシステム)
4. [戦闘システム](#戦闘システム)
5. [スキルシステム](#スキルシステム)
6. [成長システム](#成長システム)
7. [敵キャラクター設計](#敵キャラクター設計)
8. [ステータスバランス設計](#ステータスバランス設計)

---

## ゲーム概要

### 基本情報
- **タイトル**: Cross Legends（クロス・レジェンズ）
- **ジャンル**: ローグライトRPG
- **プラットフォーム**: モバイル（縦画面）
- **プレイ時間**: 1ラン 15-20分

### コンセプト
既存のアニメキャラクターを使用して3人パーティを編成し、ノードマップを進んでボスを倒すことを目指すターン制バトルゲーム。キャラクターは後から自由に追加可能。

---

## ゲームシステム

### 基本構造
- **2幕構成**: 第1幕 → 中ボス → 第2幕 → ラスボス
- **レベル制なし**: 固定ステータス + 戦闘後強化
- **サウンド**: なし
- **永続アップグレード**: 難易度解放（0-10）
- **装備システム**: なし

### ノードマップ

#### 第1幕（10ノード）
- 戦闘：4
- エリート：1
- 休憩：1
- イベント：2
- ショップ：1
- 中ボス：1

#### 第2幕（10ノード）
- 戦闘：4
- エリート：1
- 休憩：1
- イベント：2
- ショップ：1
- ラスボス：1

**総戦闘数**: 12戦（通常8 + エリート2 + ボス2）

### ノードの種類

#### 🗡️ 戦闘ノード
- 通常の敵と戦闘
- 勝利後、各キャラに報酬選択

#### ⚔️ エリートノード
- 強力な敵と戦闘
- HP +30%の強敵
- 報酬：ステータスUP倍率が+10%（通常+8% → +10%）

#### 🔥 休憩ノード
3つから1つ選択：
1. HP 40%回復
2. MP 40%回復
3. HP・MP 両方20%回復

#### ❓ イベントノード
- ランダムイベント（3択）
- 得するイベント、損するイベント、リスク/リターン型など
- 毎回結果がランダムで覚えゲーにならない

**イベント一覧（15種類）**:
- 「商人との遭遇」：ゴールド払ってアイテム / 無視 / 脅す（運判定）
- 「神秘の祭壇」：HPを捧げてスキル獲得 / MP捧げてステータスUP / 去る
- 「古びた宝箱」：開ける / 罠を警戒 / 無視
- 「不思議な泉」：ランダムで大回復 or ダメージ
- 「落とし穴」：全員HP-15%
- 「森の訓練場」：訓練してステータスUP
- 「呪いの像」：リスク/リターン型
- 「迷子の冒険者」：助ける / 無視
- 「怪しい賭博師」：ギャンブルイベント
- 「静寂の聖域」：回復系
- 「古代の書庫」：知識を得る
- 「旅の鍛冶屋」：装備強化
- 「魔物の巣穴」：戦闘 or 宝
- 「いたずら妖精」：ランダム効果
- 「願いの井戸」：願いを叶える

#### 🛒 ショップノード
ゴールドを使ってアイテムやスキルを購入できる。

#### 💎 宝箱ノード
報酬を選択：
- HP回復アイテム
- MP回復アイテム
- 蘇生アイテム
- ステータスアップアイテム

**アイテム所持数**: 最大3個

### アイテム一覧

#### 回復アイテム
| アイテム | 効果 | 対象 |
|---------|------|------|
| 回復薬 | HP30%回復 | 単体 |
| 魔力薬 | MP30%回復 | 単体 |
| 全体回復薬 | HP20%回復 | 全体 |
| 全体魔力薬 | MP20%回復 | 全体 |
| 蘇生薬 | 戦闘不能から復活（HP100%） | 単体 |

#### バフアイテム（単体）
| アイテム | 効果 | 持続 |
|---------|------|------|
| 力の結晶 | 攻撃+50% | 3ターン |
| 守護の結晶 | 防御+50% | 3ターン |
| 迅速の結晶 | 速度+50% | 3ターン |
| 会心の結晶 | クリ率+50% | 3ターン |

#### バフアイテム（全体）
| アイテム | 効果 | 持続 |
|---------|------|------|
| 力の拡散結晶 | 全体攻撃+30% | 3ターン |
| 守護の拡散結晶 | 全体防御+30% | 3ターン |
| 迅速の拡散結晶 | 全体速度+30% | 3ターン |
| 会心の拡散結晶 | 全体クリ率+30% | 3ターン |

#### デバフアイテム（敵全体）
| アイテム | 効果 | 持続 |
|---------|------|------|
| 力弱体の結晶 | 敵全体攻撃-30% | 3ターン |
| 守護弱体の結晶 | 敵全体防御-30% | 3ターン |
| 迅速弱体の結晶 | 敵全体速度-30% | 3ターン |
| 会心弱体の結晶 | 敵全体クリ率-30% | 3ターン |

#### 👑 ボスノード
- 強力なボスと戦闘
- 勝利後、報酬選択

---

## キャラクターシステム

### キャラクター解放
- 最初から全キャラ使用可能（現在50人）
- プレイヤーが好きなキャラを自由に選んでパーティ編成
- **キャラ画像**:
  - 顔画像：正方形
  - 立ち絵：2:3の縦長画像

### ステータス

#### 基本ステータス（8種類）
- **HP**: 体力（0で戦闘不能）
- **MP**: スキル使用に必要
- **物理攻撃**: 通常攻撃・物理スキルのダメージ
- **魔法攻撃**: 魔法スキルのダメージ
- **物理防御**: 物理ダメージ軽減
- **魔法防御**: 魔法ダメージ軽減
- **速度**: 行動順決定（高い順）
- **運**: クリティカル率に影響、イベント成功率に影響

## ステータスバランス設計

### ステータス総価値計算式（NEW）

総価値 = (メイン攻撃力 × 1.0) + (物理防御 × 0.7) + (魔法防御 × 0.7) + (HP × 0.35) + (速度 × 0.8) + (MP × 0.6) + (運 × 0.2)

### 重み付けの根拠
- メイン攻撃力 (1.0): 火力の基準。SP強化時の伸び（才能）が最も重要。
- 物理/魔法防御 (各0.7): 除算式の効率低下を補い、タンクが防御を盛れるように調整。
- HP (0.35): 防御0.7に対し、耐久効率（EHP）が防御と等価になる半分の値。
- 速度 (0.8): 先制の価値は高いが、1.0だと速いキャラの耐久が削れすぎるため緩和。
- MP (0.6): スキル回数と自然回復(10%)を考慮した、戦術維持のためのコスト。
- 運 (0.2): クリティカル倍率1.5倍時のダメージ期待値上昇を、1.0の攻撃力と同期。

### キャラ設計の基準値
- 目標総価値: 450
- 許容範囲: 445 ～ 455
- サブ攻撃力は自由に設定（極端に低くする必要もない）

### 各ロールの基本ステータス例
- アタッカー型: HP 130 / MP 110 / 攻撃 150 / 物防 65 / 魔防 65 / 速度 103 / 運 75 (計 449.9)
- タンク型: HP 240 / MP 90 / 攻撃 66 / 物防 135 / 魔防 135 / 速度 60 / 運 45 (計 450.0)
- ヒーラー型: HP 240 / MP 150 / 攻撃 80 / 物防 85 / 魔防 85 / 速度 85 / 運 50 (計 451.0)
- サポート&デバッファー: HP 195 / MP 130 / 攻撃 100 / 物防 80 / 魔防 80 / 速度 100 / 運 60 (計 450.25)

```
クリティカル率 = 5% + (運 ÷ 3)%
クリティカルダメージ = 1.5倍
```

**例**:
- 運60 → クリ率25%、期待ダメージ1.125倍
- 運90 → クリ率35%、期待ダメージ1.175倍
- 運120 → クリ率45%、期待ダメージ1.225倍

### キャラタイプ
各キャラには以下のタイプタグを設定：
- 物理アタッカー
- 魔法アタッカー
- タンク
- ヒーラー
- サポート
- デバッファー

### 初期スキル
各キャラは固有の初期スキル1個を所持：
- キャラの個性・元作品に合わせたユニークスキル
- 汎用スキルより若干強い（例：威力220% vs 200%）
- 表示名はキャラに合わせてカスタマイズ可能

---

## 戦闘システム

### 戦闘画面レイアウト（縦画面）

```
┌─────────────┐
│   敵 敵 敵    │ ← 上：敵エリア
├─────────────┤
│ 味方 味方 味方 │ ← 中央：味方エリア
├─────────────┤
│ [攻撃][スキル] │ ← 下：コマンドエリア
│ [防御][アイテム]│
└─────────────┘
```

### ターン制バトルフロー

1. **戦闘開始時、3人全員の行動を選択**（ポケモン式）
   - 通常攻撃（対象選択）
   - スキル使用（対象選択、MP消費）
   - 防御（先制発動）
   - アイテム使用

2. **速度順に味方/敵混合で行動実行**
   - ※ 防御は速度無視で最優先発動

3. **全員行動後、次ターンへ**

4. **敵全滅で勝利、味方全滅で敗北**

### 配置と狙われやすさ

```
味方の配置：[左（前衛）] [中央] [右（後衛）]

狙われやすさ補正：
- 左：130%
- 中央：100%
- 右：70%

※ 挑発状態のキャラがいる場合、狙われやすさは変動
```

### ダメージ計算

```javascript
// 基本ダメージ
baseDamage = 攻撃力 × スキル威力倍率（通常攻撃は100%）

// 防御力補正（防御力100につき被ダメージを約50%軽減）
damage = baseDamage / (1 + (防御力 / 100))

// 乱数（90%～110%）
damage *= 0.9 + Math.random() * 0.2

// クリティカル判定
クリティカル率 = 5 + (運 / 3) + スキルボーナス + クリティカルバフ
if (クリティカル発生) {
    damage *= 1.5
}

// 防御中
if (防御中) {
    damage *= 0.5
}
```

### 防御コマンド（NEW）

- 速度無視で先制発動
- そのターン受けるダメージ半減
- **MP10%回復**（新機能）

### MP回復システム（NEW）

- **ターン開始時**: 最大MPの10%自動回復
- **防御選択時**: さらに最大MPの10%回復（合計20%回復）
- **通常攻撃**: MP回復なし
- **スキル使用**: MP回復なし

### 敵の出現数
- 最大3体同時出現
- 雑魚戦：1-3体
- エリート戦：1-3体
- ボス戦：1体（ペアのボスは2体）

### ターゲット選択
- 基本：ランダム選択（配置補正あり）

### 逃走
- 不可

### 状態異常・バフ/デバフ

#### ステータス操作系
- HP回復/ダメージ
- MP回復/消費
- 物理攻撃UP/DOWN
- 魔法攻撃UP/DOWN
- 物理防御UP/DOWN
- 魔法防御UP/DOWN
- 速度UP/DOWN
- **クリティカル率UP**（`critBoost`、statusEffects配列で管理）

#### 状態異常系
- **毒**: ターン終了時ダメージ（最大HPの8%）
- **麻痺**: 確率で行動不能、速さ半減
- **沈黙**: スキル使用不可
- **スタン**: 1ターン行動不能
- **火傷**: ターン終了時ダメージ+防御低下

#### クリティカル率バフの重複（NEW）
- **critBoost**（クリティカル率バフ）は複数のソースから付与された場合、全て合算
- 例：クリ率+30%のバフを2回受けた場合 → +60%として計算
- 100%を超える数値も内部計算で許容（100%以上は確定クリティカル）
- UI表示でも上限なし（150%などそのまま表示）

#### 特殊効果
- **挑発**: 敵から狙われやすくなる
- **反撃**: 攻撃を受けた時に反撃
- **防御**: ダメージ半減（1ターン）
- **巨体化（Gmax）**: 全ステータス+100%（特殊）

#### バフ・デバフの重複仕様
- **重複許可方式**: 同じバフが複数回適用されても上書きではなく加算、乗算する

---

## スキルシステム

### スキルスロット
- 各キャラ4つまでスキル装備可能
- 初期スキル1個 + 戦闘報酬で獲得3個

### スキル獲得方式
- タイプ別スキルプール
- スキル獲得時、そのキャラのタイプに合ったスキル候補3つを提示
- **80%：同タイプのスキル + 単体回復（heal）**
- **20%：別タイプのスキル（ランダム要素）**

**特別ルール**:
- 全てのロールが80%の優先枠で「単体回復（heal）」を習得可能
- ヒーラー以外でも回復スキルを取得できるため、編成の自由度が向上
- ヒーラー専用スキル（全体回復、蘇生、状態回復）は従来通りヒーラーのみ

→ 基本は役割に合ったスキルだが、「タンクヒーラー」「防御型アタッカー」なども可能

### スキル一覧

#### 物理アタッカー系
| スキル名 | 効果 | MP |
|---------|------|-----|
| 強撃 | 単体物理攻撃（威力150%） | 30 |
| 連続攻撃 | 単体物理攻撃2回（威力80%×2） | 40 |
| 全力攻撃 | 単体物理攻撃（威力200%） | 60 |
| 広範囲攻撃 | 全体物理攻撃（威力100%） | 50 |
| 弱点攻撃 | 単体攻撃（威力120%、クリ率+30%） | 35 |

#### 魔法アタッカー系
| スキル名 | 効果 | MP |
|---------|------|-----|
| 魔力弾 | 単体魔法攻撃（威力150%） | 30 |
| 強魔力弾 | 単体魔法攻撃（威力200%） | 50 |
| 魔力の嵐 | 全体魔法攻撃（威力110%） | 55 |
| 魔力衝撃 | 単体魔法攻撃（威力140%、麻痺100% 3ターン） | 45 |

#### タンク系
| スキル名 | 効果 | MP |
|---------|------|-----|
| 挑発（先制） | 3ターン挑発状態、自分の防御+20% | 20 |
| 鉄壁（先制） | 3ターン自分の防御+50% | 30 |
| 反撃の構え | 防御+30%、攻撃受けた時に反撃（威力150%）3ターン | 35 |
| 不屈 | HP30%以下で発動可、HP50%回復+防御+40% 3ターン | 60 |

#### ヒーラー系
| スキル名 | 効果 | MP |
|---------|------|-----|
| 回復 | 単体HP40%回復 **（全ロールで習得可能）** | 35 |
| 全体回復 | 全体HP20%回復 | 60 |
| 蘇生 | 戦闘不能の味方をHP30%で復活 | 80 |
| 状態回復 | 単体の状態異常を全て解除 | 25 |
| MP回復 | 単体のMP30%回復 | 20 |

#### サポート系（単体バフ）
| スキル名 | 効果 | MP |
|---------|------|-----|
| 攻撃強化 | 単体の攻撃+50% 3ターン | 30 |
| 防御強化 | 単体の防御+50% 3ターン | 30 |
| 速度上昇 | 単体の速度+60% 3ターン | 35 |
| 幸運付与 | 単体のクリ率+50% 3ターン | 30 |

#### サポート系（全体バフ）
| スキル名 | 効果 | MP |
|---------|------|-----|
| 全体攻撃強化 | 全体の攻撃+35% 3ターン | 50 |
| 全体防御強化 | 全体の防御+35% 3ターン | 50 |
| 全体速度上昇 | 全体の速度+35% 3ターン | 55 |
| 全体幸運付与 | 全体のクリ率+35% 3ターン | 50 |

#### デバッファー系（単体デバフ）
| スキル名 | 効果 | MP |
|---------|------|-----|
| 弱体化 | 敵単体の攻撃-30% 3ターン | 30 |
| 防御破壊 | 敵単体の防御-30% 3ターン | 30 |
| 速度低下 | 敵単体の速度-30% 3ターン | 30 |
| 不運付与 | 敵単体のクリ率-30% 3ターン | 30 |

#### デバッファー系（全体デバフ）
| スキル名 | 効果 | MP |
|---------|------|-----|
| 全体弱体化 | 敵全体の攻撃-25% 3ターン | 50 |
| 全体防御破壊 | 敵全体の防御-25% 3ターン | 50 |
| 全体速度低下 | 敵全体の速度-25% 3ターン | 55 |
| 全体不運付与 | 敵全体のクリ率-25% 3ターン | 50 |

### MP消費の目安
- 小技：15-25 MP
- 中技：30-45 MP
- 大技：50-80 MP

---

## 成長システム

### 基本方針
- レベル制なし
- 各キャラは固定の初期ステータスでスタート
- 戦闘後の報酬で強化

### 戦闘後の報酬
戦闘勝利後、各キャラ（3人）それぞれに3つの選択肢を提示 → 計9回の選択

**選択肢**:
1. ステータスアップ（選択式）
2. スキル獲得/強化
3. （イベント・宝箱の場合はアイテムなども）

### ステータスアップ
- 8つのステータスから1つ選択
- **選んだステータス = 初期値 × (1 + 0.08 × 強化回数)**
- 加算方式（乗算ではない）

**例**: 物攻140のキャラ
```
1回目強化：140 → 151.2（140×1.08）
2回目強化：151.2 → 162.4（140×1.16）
3回目強化：162.4 → 173.6（140×1.24）
※ 毎回、元の値（140）の+8%ずつ増える
```

### エリート戦の特典
- ステータスUP倍率が+10%（通常+8% → +10%）
- **例**: 物攻140 → 154（140×1.10）

### 成長の目安
総戦闘15回のうち、1人あたり：
- ステータスUP：約7-8回
- スキル獲得：約7-8回

**最終的な成長幅**: 初期ステータスの1.6-1.8倍程度

---

## 敵キャラクター設計

### 基本方針
- 敵キャラはアニメ作品の敵キャラクターを使用
- 例：フリーザ、無惨、ディオ、エレン巨人体など

### 敵の構成

#### 雑魚・エリート敵
- 同じ敵キャラプールから選出
- エリートは同じキャラだが強化版
  - HP +30%
  - スキル +1個
- ランダムで1-3体出現

#### 中ボス（第1幕ボス）
- 専用ボスキャラ5種類
  - バイキンマン、ギギネブラ、夏油傑、バンギラス、大蛇丸
- ランダムで1体選出
- 毎回違うボスが登場

#### ラスボス（第2幕ボス）
- 専用ラスボスキャラ7種類
  - フリーザ、DIO、藍染惣右介、ネクロズマ、マスターハンド、死柄木弔、クッパ
- ランダムで1体選出

### 敵の強さ基準（プレイヤー初期値を100%とする）

```
第1幕開始（1戦目）：60%
第1幕中盤（3戦目）：80%
第1幕エリート：100%（+30% HP）
中ボス：120%
第2幕開始：130%
第2幕中盤：150%
第2幕エリート：170%（+30% HP）
ラスボス：200%
```

### 敵の運とクリティカル率（NEW）

**運の上限**: 75（クリティカル率30%）

**理由**: 敵のクリティカル率が高すぎるとプレイヤーが即死するリスクがあるため、最大30%に制限

**ラスボスのバランス調整**: 期待攻撃力（最大攻撃×クリティカル期待倍率）が均等になるように運と攻撃力を調整

### 敵のスキルセット

#### 基本ルール
- 雑魚：通常攻撃 + スキル1個
- エリート：通常攻撃 + スキル2個
- ボス/ラスボス：通常攻撃 + スキル3-4個
- タイプに応じた汎用スキルを割り当て

### 敵AIの簡易ルール
1. MP不足なら通常攻撃
2. 複数体いる場合のみ、味方強化スキル使用
3. HP 50%以下なら回復/防御スキル優先
4. それ以外は攻撃スキルをランダム使用
5. 挑発など1体のとき意味がないスキルは使用しない

### 敵AIの高度なルール（NEW）

#### リアルタイム行動決定
- 敵の行動決定は「ターン開始時」ではなく「各敵の行動順が回ってきた直後」に実行
- これにより、味方が先に挑発をかけた場合、後から行動する敵はそれを考慮してターゲットを選択
- 戦術的なプレイが可能に

#### 動的行動選択システム（重み付けランダム + 連続使用減衰）

**基本確率配分**:
- 通常攻撃: 20%（固定）
- 残り80%: スキル数で均等分配

| スキル構成 | 通常攻撃 | 通常スキル1 | 通常スキル2 | 固有スキル |
|-----------|---------|------------|------------|-----------|
| 1スキル（雑魚） | 20% | - | - | 80% |
| 2スキル | 20% | 40% | - | 40% |
| 3スキル | 20% | 27% | 27% | 27% |

**連続使用減衰**:
- 前回と同じ行動を選んだ場合、その行動の重みが1/3に減衰
- 他の行動の確率が相対的に上昇
- 例：固有スキル使用後 → 固有スキルの確率が低下、他の行動の確率が上昇

**減衰後の確率例（2スキルの敵）**:

| 前回の行動 | 通常攻撃 | 通常スキル | 固有スキル |
|-----------|---------|-----------|-----------|
| 初回 | 20% | 40% | 40% |
| 固有スキル後 | 27% | 55% | 18% |
| 通常スキル後 | 27% | 18% | 55% |

#### 瀕死モード（HP30%以下）
- HP30%以下になった敵は「瀕死モード」に移行
- バフ/デバフスキルを選択肢から除外し、攻撃または回復のみを選択
- 追い詰められた敵がより攻撃的になる表現

#### バフ対象選択
- バフ（補助技）の対象選択時、生存している仲間からランダムに選択
- 常にリストの先頭を選ぶのではなく、より自然な挙動に

---


---

## データ構造

### プレイアブルキャラ例

```javascript
{
  id: "character_001",
  name: "モンキー・D・ルフィ",
  displayName: "ルフィ",

  stats: {
    hp: 130,
    mp: 100,
    physicalAttack: 145,
    magicAttack: 35,
    physicalDefense: 60,
    magicDefense: 55,
    speed: 110,
    luck: 80
  },

  type: "physical_attacker",

  uniqueSkill: {
    id: "ultra_attack",
    displayName: "ゴムゴムの銃",
    basePower: 220,
    mpCost: 60,
    type: 'physical_attack',
    target: 'single_enemy',
    description: "単体に強力な物理攻撃（威力220%）"
  },

  image: {
    full: "img/luffy_full.png",
    face: "img/luffy_face.png"
  },

  skills: [],
  excludeSkills: ['ultra_attack']
}
```

### 敵キャラ

```javascript
{
  id: "enemy_001",
  name: "フリーザ",
  displayName: "フリーザ",
  type: "magic_attacker",

  baseStats: {
    hp: 850,
    mp: 250,
    physicalAttack: 100,
    magicAttack: 80,
    physicalDefense: 112,
    magicDefense: 120,
    speed: 110,
    luck: 75  // 上限75（クリ率30%）
  },

  skills: ['magic_storm'],

  uniqueSkill: {
    id: 'death_ball',
    displayName: 'デスボール',
    type: 'magic_attack',
    target: 'single_enemy',
    basePower: 160,
    mpCost: 60,
    description: '単体に超強力な魔法攻撃（威力180%）'
  },

  image: {
    full: "img/freeza.png"
  },

  rank: "last_boss"
}
```

---



 **固有スキルの設定**
   - 汎用スキルより20%強い威力（攻撃以外は適宜調整だが上位互換に）
   - キャラの個性を反映
   - MP消費量は基本的に同系統汎用スキルと同じ（そのスキルは除外スキルに）
. **画像の準備**
   - 顔画像：正方形
   - 立ち絵：2:3の縦長

---